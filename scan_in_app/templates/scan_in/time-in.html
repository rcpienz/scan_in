{% extends "scan_in/base.html" %}

{% load static %}

{% block content %}

<div style="max-width: 500px; margin: 2rem auto; background-color: #fff; padding: 2rem; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.08);">

    <h2 style="text-align: center; margin-bottom: 1.5rem; font-weight: 500;">Time In</h2>

    <!-- Feedback message -->
    {% if feedback %}

        <div style="
            background-color: {{ feedback.color }};
            color:white;
            font-size:1.5rem;
            font-weight:700;
            padding:1rem 0;
            border-radius:12px;
            margin-bottom:2rem;
        ">
            {{ feedback.status }}
            {% if feedback.minutes > 0 %}
                - {{ feedback.minutes }} min late
            {% endif %}
        </div>

        <script>
		    const sound = new Audio(
		        "{% static 'scan_in/sounds/chime.mp3' %}"
		    );

		    {% if feedback.status == "LATE" %}
		        sound.src = "{% static 'scan_in/sounds/beep.mp3' %}";
		    {% endif %}

		    sound.play().catch(() => {});
		</script>

    {% endif %}

    <p style="text-align: center; color: #555; margin-bottom: 2rem;">
        Enter your Employee ID to clock in.
    </p>

    <form action="{% url 'scan_in_app:time-in' %}" method="post" style="display: flex; flex-direction: column; gap: 1.5rem;">
        {% csrf_token %}

        <!-- Employee ID input -->
     
        
        <input type="text" name="employeeId" placeholder="Enter your Employee ID"
               style="padding: 1rem; font-size: 1rem; border-radius: 8px; border: 1px solid #ccc; width: 100%; box-sizing: border-box;"
               autofocus
               required
        >

        <!-- Submit button -->
        <button type="submit"
                style="
                    background-color: #27ae60;
                    color: white;
                    font-size: 1.1rem;
                    font-weight: 600;
                    padding: 1rem;
                    border: none;
                    border-radius: 10px;
                    cursor: pointer;
                    transition: all 0.2s;
                "
                onmouseover="this.style.backgroundColor='#2ecc71';"
                onmouseout="this.style.backgroundColor='#27ae60';"
        >
            Submit
        </button>
    </form>

    <!-- Optional: Feedback message -->
    {% if form.errors %}
        <div style="margin-top: 1rem; color: red; font-weight: 500; text-align: center;">
            {% for field in form %}
                {% for error in field.errors %}
                    {{ error }}<br>
                {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
                {{ error }}<br>
            {% endfor %}
        </div>
    {% endif %}

</div>

{% endblock content %}